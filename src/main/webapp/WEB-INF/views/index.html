<!DOCTYPE html>
<html>
	<head>
		<title>Gestione Libri</title>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
	</head>
	<body>
		<h1>Gestione Libri</h1>
		
		<th:if ="${prodottoDaModificare}?">
			<h2>Modifica del prodotto - ${prodottoDaModificare.nome}</h2>
			<div style="margin: 20px;">
				<form method="POST" action="update" id="datiProdotto">
					<input type="hidden" name="id" value="${prodottoDaModificare.id}"/>
					<div>
						<label for="titolo">Titolo</label>
    <input type="text" th:field="*{titolo}" id="titolo" placeholder="titolo">
    <!--  >span th:if="${#fields.hasErrors('titolo')}" th:errors="*{titolo}"></span-->
    <label for="autore">Autore</label>
    <input type="text" th:field="*{autore}" id="autore" placeholder="autore">
    <!--  >span th:if="${#fields.hasErrors('autore')}" th:errors="*{autore}"></span-->
    <label for="dataPubblicazione">Data di Pubblicazione</label>
    <input type="text" th:field="*{dataPubblicazione}" id="dataPubblicazione" placeholder="yyyy-MM-dd">
    <!--  >span th:if="${#fields.hasErrors('dataPubblicazione')}" th:errors="*{dataPubblicazione}"></span-->
    <label for="numeroPezzi">Numero Pezzi</label>
    <input type="number" th:field="*{numeroPezzi}" id="numeroPezzi" placeholder="numeroPezzi">
    <!--  >span th:if="${#fields.hasErrors('numeroPezzi')}" th:errors="*{numeroPezzi}"></span-->
    </div>
					<div>
						<input type="submit" name="invia" value="Salva modifiche" />
					</div>
				</form>
			</div>
		<th:else>
			<h2>Nuovo prodotto</h2>
			<div style="margin: 20px;">
				<form method="POST" action="add" id="datiProdotto">
					<p>Titolo: <input type="text" th:field="*{titolo}" /></p>
        <p>Autore: <input type="text" th:field="*{autore}" /></p>
       	<p>Data Pubblicazioine: <input type="text" th:field="*{dataPubblicazione}" placeholder="yyyy-MM-dd" /> </p>
        <p>Numero Pezzi: <input type="number" th:field="*{numeroPezzi}" /></p>
        <p><input type="submit" value="Submit" /> <input type="reset" value="Reset" /></p>
   
				</form>
			</div>
		</#if>
		<hr>
		<h2>Lista prodotti</h2>
		<div>
			<table>
				<thead>
					<tr>
						<th> Titolo </th>
          				  <th> Autore </th>
          				  <th> Numero Pezzi</th>
           				 <th>Data di Pubblicazione</th>
                        <th>Edit</th>
                        <th>Delete</th>
					</tr>
				</thead>
				<  <tbody>
                 <tr th:each="book : ${books}">
            <td><span th:text="${book.titolo}"> Title </span></td>
            <td><span th:text="${book.autore}"> Author </span></td>
            <td><span th:text="${book.numeroPezzi}"> Numero Pezzi</span></td>
            <td><span th:text="${book.dataPubblicazione}">Data pubblicazione</span></td>
                    <td><a th:href="@{/book/edit/{id}(id=${book.id})}">Edit</a></td>
                    <td><a th:href="@{/book/delete/{id}(id=${book.id})}">Delete</a></td>
                </tr>
           
							<a href="delete?id=${prodotto.id}">Elimina</a>
							<a href="?id=${prodotto.id}">Modifica</a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</body>
</html>